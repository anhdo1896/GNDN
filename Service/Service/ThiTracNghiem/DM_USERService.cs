//------------------------------------------------------------------------------------------------------------------------
//-- Generated By:   TrungVK using CodeSmith 4.0.0.0
//-- Template:       Service.cst
//-- Date Generated: Friday, September 19, 2014
//------------------------------------------------------------------------------------------------------------------------
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using DataAccess;
using Entity;
using System.ComponentModel;
using System.Data;

namespace SystemManageService
{
    public partial class DM_USERService
    {
        public DataTable LAY_USERNAME()
        {
            return _dm_userDataAccess.LAY_USERNAME();
        }
        public int InsertSYS_User_maDvi(SYS_User sys_user, string Ma_Dvi)
        {
            return _dm_userDataAccess.InsertSYS_User_maDvi(sys_user, Ma_Dvi);
        }
        public void UpdateSYS_UserAll(DM_USER dm_user)
        {
            _dm_userDataAccess.UpdateSYS_UserAll(dm_user);
        }
        public int InsertSYS_UserAll(DM_USER dm_user)
        {
            return _dm_userDataAccess.InsertSYS_UserAll(dm_user);
        }
        public List<DM_USER> SelectAllSYS_User_IsActive(int IDMA_DVIQLY)
        {
            return _dm_userDataAccess.SelectAllSYS_User_IsActive(IDMA_DVIQLY);
        }
        public List<DM_USER> DM_USER_SelectAll_ByIDMA_DVIQLY(int IDMA_DVIQLY)
        {
            return _dm_userDataAccess.DM_USER_SelectAll_ByIDMA_DVIQLY(IDMA_DVIQLY);
        }
        public DM_USER DM_UserByUserNameAndIDOrganization(int IDMA_DVIQLY, string Name)
        {
            return _dm_userDataAccess.DM_UserByUserNameAndIDOrganization(IDMA_DVIQLY, Name);
        }

        public DM_USER DM_UserNameAndIDOrganization(string MA_DVIQLY, string Name)
        {
            return _dm_userDataAccess.DM_UserNameAndIDOrganization(MA_DVIQLY, Name);
        }

        public List<DM_USER> SelectAllSYS_User_NotIsActive(int IDMA_DVIQLY)
        {
            return _dm_userDataAccess.SelectAllSYS_User_NotIsActive(IDMA_DVIQLY);
        }
        public DM_USER CheckLogIn(string userName, string passWord, int IDMA_DVI)
        {
            DM_USER result = _dm_userDataAccess.DM_UserByUserNameAndIDOrganization(IDMA_DVI, userName);

            if (result.PASSWORD == DM_USER.Encrypt(passWord))
            {
                return result;
            }
            return null;
        }
        public DM_USER CheckLogIn(string userName, string passWord, string MA_DVI)
        {
            DM_USER result = _dm_userDataAccess.DM_UserNameAndIDOrganization(MA_DVI, userName);

            if (result.PASSWORD == DM_USER.Encrypt(passWord))
            {
                return result;
            }
            Dapper_SQL.ISCHECK_LOGIN(int.Parse(MA_DVI), userName);
            return null;
        }
        public void UpdateDM_USER_PASSWORD(DM_USER dm_user, string ma_dv)
        {
            _dm_userDataAccess.UpdateDM_USER_PASSWORD(dm_user, ma_dv);
        }
    }
}


